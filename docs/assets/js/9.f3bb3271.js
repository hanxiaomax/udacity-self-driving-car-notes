(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{126:function(t,s,a){t.exports=a.p+"assets/img/15338223834947.a3085e41.jpg"},127:function(t,s,a){t.exports=a.p+"assets/img/15338221454689.aa2b13fa.jpg"},128:function(t,s,a){t.exports=a.p+"assets/img/15338211284672.3da117c4.jpg"},129:function(t,s,a){t.exports=a.p+"assets/img/15338267691227.6c5d7d14.jpg"},130:function(t,s,a){t.exports=a.p+"assets/img/15339110799849.5b24a1a3.jpg"},316:function(t,s,a){"use strict";a.r(s);var n=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"计算机视觉基础"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#计算机视觉基础","aria-hidden":"true"}},[t._v("#")]),t._v(" 计算机视觉基础")]),n("h2",{attrs:{id:"_1-车道线检测小程序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-车道线检测小程序","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.车道线检测小程序")]),n("ol",[n("li",[t._v("利用颜色进行检测")]),n("li",[t._v("创建分割区域")]),n("li",[t._v("边缘检测")]),n("li",[t._v("直线提取")])]),n("p",[t._v("综合以上技术，尤其是2，3，4，我们可以对一些比较规则的图片进行检测，得到一个比较不错的车道线检测效果")]),n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" matplotlib"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pyplot "),n("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" plt\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" matplotlib"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image "),n("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" mpimg\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" numpy "),n("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" np\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" cv2\nfig_size "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("25")]),t._v("\nCOL "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("2")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("#绘图")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("draw_imgs")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("imgs"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    fig "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("figure"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("figsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fig_size"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("fig_size"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("dpi"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("80")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" index"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("img "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),n("span",{attrs:{class:"token builtin"}},[t._v("enumerate")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("imgs"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplot"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token builtin"}},[t._v("len")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("imgs"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("COL"),n("span",{attrs:{class:"token operator"}},[t._v("+")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" COL"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index"),n("span",{attrs:{class:"token operator"}},[t._v("+")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{attrs:{class:"token comment"}},[t._v("#plt.imshow(img)")]),t._v("\n        plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token builtin"}},[t._v("list")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("keys"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token builtin"}},[t._v("list")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("values"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        fig"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tight_layout"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("#子图紧凑排版")]),t._v("\n        \n"),n("span",{attrs:{class:"token comment"}},[t._v("#在每张图上绘制多边形")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("draw_poly")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vertices"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    x "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    y "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" v "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" vertices"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" xx"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("yy "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" v"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            x"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xx"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            y"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("yy"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    x"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    y"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("y"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plot"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'b--'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lw"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("4")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nimgs "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Read in and grayscale the image")]),t._v("\nimage "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" mpimg"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imread"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'exit.jpg'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ngray "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cvtColor"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COLOR_RGB2GRAY"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Define a kernel size and apply Gaussian smoothing")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("###### 高斯模糊 #######")]),t._v("\nkernel_size "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("5")]),t._v("\nblur_gray "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("GaussianBlur"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gray"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("kernel_size"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" kernel_size"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Define our parameters for Canny and apply")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("###### canny 边缘检测 #######")]),t._v("\nlow_threshold "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("50")]),t._v("\nhigh_threshold "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("150")]),t._v("\nedges "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Canny"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blur_gray"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" low_threshold"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" high_threshold"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Next we'll create a masked edges image using cv2.fillPoly()")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 使用zeros_like构造一个和edges一样规模的零矩阵")]),t._v("\nmask "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zeros_like"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("edges"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   \nignore_mask_color "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("255")]),t._v("   \n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# This time we are defining a four sided polygon to mask")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("###### 构建多边形区域 #######")]),t._v("\nimshape "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" image"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shape\nvertices "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("array"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("imshape"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("450")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("290")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("490")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("290")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("imshape"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("imshape"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dtype"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("int32"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ncv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fillPoly"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mask"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vertices"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ignore_mask_color"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmasked_edges "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bitwise_and"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("edges"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mask"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("###### 霍夫变换检测直线段 #######")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Define the Hough transform parameters")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Make a blank the same size as our image to draw on")]),t._v("\nrho "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# distance resolution in pixels of the Hough grid")]),t._v("\ntheta "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pi"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),n("span",{attrs:{class:"token number"}},[t._v("180")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# angular resolution in radians of the Hough grid")]),t._v("\nthreshold "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("     "),n("span",{attrs:{class:"token comment"}},[t._v("# minimum number of votes (intersections in Hough grid cell)")]),t._v("\nmin_line_length "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("5")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("#minimum number of pixels making up a line")]),t._v("\nmax_line_gap "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("    "),n("span",{attrs:{class:"token comment"}},[t._v("# maximum gap in pixels between connectable line segments")]),t._v("\nline_image "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("copy"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token operator"}},[t._v("*")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# creating a blank to draw lines on")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Run Hough on edge detected image")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v('# Output "lines" is an array containing endpoints of detected line segments')]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 返回值是得到的霍夫变换检测到的符合条件的线段")]),t._v("\nlines "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HoughLinesP"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("masked_edges"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" rho"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" theta"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" threshold"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("array"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            min_line_length"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" max_line_gap"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n\n"),n("span",{attrs:{class:"token comment"}},[t._v('# Iterate over the output "lines" and draw lines on a blank image')]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("###### 给检测到到线段着色并绘制在图像上 #######")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" line "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" lines"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" x1"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("y1"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("x2"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("y2 "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" line"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("line"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("line_image"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x1"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("y1"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x2"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("y2"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("200")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("20")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v('# Create a "color" binary image to combine with line image')]),t._v("\ncolor_edges "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dstack"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("edges"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" edges"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" edges"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Draw the lines on the edge image")]),t._v("\nlines_edges "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("addWeighted"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("color_edges"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0.8")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" line_image"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n\nimgs"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token string"}},[t._v('"origin"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("image"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nimgs"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token string"}},[t._v('"blur_gray"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("blur_gray"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nimgs"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token string"}},[t._v('"edges"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("edges"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nimgs"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token string"}},[t._v('"mask"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mask"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nimgs"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token string"}},[t._v('"masked_edges"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("masked_edges"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nimgs"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token string"}},[t._v('"line_image"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("line_image"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ndraw_imgs"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("imgs"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("vertices"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])]),n("p",[n("img",{attrs:{src:a(130),alt:""}})]),n("h2",{attrs:{id:"_2-相关库函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-相关库函数","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.相关库函数")]),n("h3",{attrs:{id:"_1-numpy相关函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-numpy相关函数","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. numpy相关函数")]),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("功能")]),n("th",{staticStyle:{"text-align":"center"}},[t._v("函数")]),n("th",{staticStyle:{"text-align":"center"}},[t._v("使用")])])]),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("多边形拟合")]),n("td",{staticStyle:{"text-align":"center"}},[n("a",{attrs:{href:"https://docs.scipy.org/doc/numpy/reference/generated/numpy.polyfit.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("numpy.polyfit")])]),n("td",{staticStyle:{"text-align":"center"}})]),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("深度方向叠加矩阵")]),n("td",{staticStyle:{"text-align":"center"}},[n("a",{attrs:{href:"https://docs.scipy.org/doc/numpy/reference/generated/numpy.dstack.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("numpy.dstack")])]),n("td",{staticStyle:{"text-align":"center"}})])])]),n("h3",{attrs:{id:"_2-matplotlib相关函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-matplotlib相关函数","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. matplotlib相关函数")]),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("功能")]),n("th",{staticStyle:{"text-align":"center"}},[t._v("函数")]),n("th",{staticStyle:{"text-align":"center"}},[t._v("使用")])])]),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("绘制子图")]),n("td",{staticStyle:{"text-align":"center"}},[n("a",{attrs:{href:"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.subplot.html#matplotlib.pyplot.subplot",target:"_blank",rel:"noopener noreferrer"}},[t._v("matplotlib.pyplot..subplot")])]),n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("subplot(nrows, ncols, index, **kwargs)")])])])])]),n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("figure"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("figsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fig_size"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("fig_size"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("dpi"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("80")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nplt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplot"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# 一共绘制1行2列子图，这个是第1个")]),t._v("\nplt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nplt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplot"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token comment"}},[t._v("# 一共绘制1行2列子图，这个是第2个")]),t._v("\nplt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gray"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),n("p",[n("img",{attrs:{src:a(129),alt:""}})]),n("p",[t._v("https://blog.csdn.net/yuejisuo1948/article/details/81023125")]),n("h3",{attrs:{id:"_3-opencv相关函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-opencv相关函数","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. opencv相关函数")]),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("功能")]),n("th",{staticStyle:{"text-align":"center"}},[t._v("函数")]),n("th",{staticStyle:{"text-align":"center"}},[t._v("用法")])])]),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("绘制线条")]),n("td",{staticStyle:{"text-align":"center"}},[n("a",{attrs:{href:"https://docs.opencv.org/3.0-beta/modules/imgproc/doc/drawing_functions.html?highlight=line#cv2.line",target:"_blank",rel:"noopener noreferrer"}},[t._v("cv2.line")])]),n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("cv2.line(img, pt1, pt2, color[, thickness[, lineType[, shift]]]) → img")])])]),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("绘制多边形")]),n("td",{staticStyle:{"text-align":"center"}},[n("a",{attrs:{href:"https://docs.opencv.org/3.0-beta/modules/imgproc/doc/drawing_functions.html?highlight=cv2.fillpoly#cv2.fillPoly",target:"_blank",rel:"noopener noreferrer"}},[t._v("cv2.fillPoly")])]),n("td",{staticStyle:{"text-align":"center"}},[n("code",[t._v("cv2.fillPoly(img, pts, color[, lineType[, shift[, offset]]]) → img")])])]),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("按位与，即应用一个mask到目标图像")]),n("td",{staticStyle:{"text-align":"center"}},[n("a",{attrs:{href:"https://docs.opencv.org/3.0-beta/modules/core/doc/operations_on_arrays.html?highlight=bitwise_and#cv2.bitwise_and",target:"_blank",rel:"noopener noreferrer"}},[t._v("cv2.bitwise_and")])]),n("td",{staticStyle:{"text-align":"center"}})]),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("霍夫直线检测")]),n("td",{staticStyle:{"text-align":"center"}},[n("a",{attrs:{href:"https://docs.opencv.org/3.0-beta/modules/imgproc/doc/feature_detection.html?highlight=cv2.houghlinesp#cv2.HoughLinesP",target:"_blank",rel:"noopener noreferrer"}},[t._v("cv2.HoughLinesP")])]),n("td",{staticStyle:{"text-align":"center"}})])])]),n("p",[t._v("cv2.inRange() for color selection\ncv2.fillPoly() for regions selection\ncv2.line() to draw lines on an image given endpoints\ncv2.addWeighted() to coadd / overlay two images cv2.cvtColor() to grayscale or change color cv2.imwrite() to output images to file\ncv2.bitwise_and() to apply a mask to an image")]),n("p",[t._v("图片缩放")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('def save_image(filename,img):\n    size = img.shape\n    print(size)\n    img2save = cv2.resize(img,(size[1]//2,size[0]//2),cv2.INTER_LINEAR)\n    print(img2save.shape)\n    plt.imsave("./examples/{0}.jpg".format(filename),img2save)\n')])]),n("p",[t._v("plot转换为图片")]),n("p",[t._v("子图")]),n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("draw_poly")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("img"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("vertices"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    fig "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("figure"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    x "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    y "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" v "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" vertices"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" xx"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("yy "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" v"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            x"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xx"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            y"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("yy"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plot"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xx"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("yy"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token string"}},[t._v("'.'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" color"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v("'red'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("markersize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("20")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            note_point "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"({0},{1})"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token builtin"}},[t._v("format")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xx"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("yy"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotate"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("note_point"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("xy"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xx"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("yy"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("color"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v("'red'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            \n    x"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    y"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("y"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plot"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'b--'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lw"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("4")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("#print(help(poly_img))")]),t._v("\n    fig"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("savefig"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"./examples/{0}.jpg"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token builtin"}},[t._v("format")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("#ax = plt.gca()")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("#ax.invert_yaxis() ")]),t._v("\n")])]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("f, ((ax1, ax2) ,(ax3,ax4)) = plt.subplots(2, 2, figsize=(24, 9))\nf.tight_layout()\nax1.imshow(image)\nax1.set_title('Original Image', fontsize=50)\nax3.imshow(grad_binary_x, cmap='gray')\nax3.set_title('Thresholded Gradient', fontsize=50)\nplt.subplots_adjust(left=0., right=1, top=1.5, bottom=0.)\nax4.imshow(grad_binary_y, cmap='gray')\nax4.set_title('Thresholded Gradient', fontsize=50)\nplt.subplots_adjust(left=0., right=1, top=1.5, bottom=0.)\n")])]),n("p",[t._v("dpi")]),n("h2",{attrs:{id:"_3-图像矩阵及mask"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-图像矩阵及mask","aria-hidden":"true"}},[t._v("#")]),t._v(" 3.图像矩阵及mask")]),n("h2",{attrs:{id:"_4-霍夫变换"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-霍夫变换","aria-hidden":"true"}},[t._v("#")]),t._v(" 4. 霍夫变换")]),n("h3",{attrs:{id:"_1-霍夫变换"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-霍夫变换","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.霍夫变换")]),n("p",[t._v("阅读材料2是一个非常好的了解霍夫变换的资料。在此做一些总结。")]),n("h4",{attrs:{id:"_1-斜率-截距空间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-斜率-截距空间","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. 斜率-截距空间")]),n("p",[t._v("首先，我们在图像空间中，找到两个端点 (𝑥1,𝑦1) 和 (𝑥2,𝑦2)，它们是可以构成一条直线的，但是我们先不去管通过它们的直线，但看每一个点，都有无限个直线，以不同的斜率m和截距b，通过这个点。")]),n("p",[n("img",{attrs:{src:a(128),alt:""}})]),n("p",[t._v("我们把y=mx+b变换成b=y-mx之后，实际上可以将这某个直线变换到一个以b和m做参数的空间中，此时，图像空间中的一条固定直线，因其b和m是定值，所以在m-b空间中是一个点(m,b)。\n类似的，图像空间中的某个点(𝑥1,𝑦1) ，因其b和m符合b=y-mx方程，因此在m-b空间中是一条直线。")]),n("p",[t._v("这时我们再看之前穿过 (𝑥1,𝑦1) 和 (𝑥2,𝑦2)的直线，这条直线上的所有的点，其斜率和截距都是m和b，因此这个直线上的所有的点，在m-b空间中都经过点(m,b)。")]),n("p",[t._v("每当我们找到端点为 (𝑥1,𝑦1) 和 (𝑥2,𝑦2)的一条直线上的点，mb空间中的点(m,b)就会被一条直线经过，这个过程称为"),n("strong",[t._v("vote")]),t._v("，因此，vote越多，说明我们在 (𝑥1,𝑦1) 和 (𝑥2,𝑦2)上找到的线段越多，越可能是直线。")]),n("h4",{attrs:{id:"_2-极坐标空间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-极坐标空间","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. 极坐标空间")]),n("p",[t._v("上述m-b空间最大的问题是，截距可能会是无穷，这样在m-b空间上就找不到点(m,b)了。\n因此引入极坐标空间。\n"),n("img",{attrs:{src:a(127),alt:""}})]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("ρ = x cos θ + y sin θ\n\nwhere:\nρ (rho) = distance from origin to the line. [-max_dist to max_dist].\n          max_dist is the diagonal length of the image.  \nθ = angle from origin to the line. [-90° to 90°]\n")])]),n("p",[t._v("变换到霍夫空间中的时候，原图像中的点，变换为曲线，原图像中的直线，变换为点。因此两条曲线的焦点就表示找到了过这两个点的一条直线。\n"),n("img",{attrs:{src:a(126),alt:""}})]),n("p",[t._v("同样，越多的直线经过这两点，霍夫空间中的曲线焦点被相交的次数越多，vote次数也越多。")]),n("p",[t._v("我们在实际的运用中，可以设定一个阈值，相交点被vote的次数为5，也就是说，在图像空间两个端点 (𝑥1,𝑦1) 和 (𝑥2,𝑦2)，连成的直线上，我们至少还能找到其他5个点组成的线段。")]),n("pre",[n("code",[t._v("rho = 1 # distance resolution in pixels of the Hough grid\ntheta = np.pi/180 # angular resolution in radians of the Hough grid\nthreshold = 100   #这个值越大，被检测到的直线段越少，有可能检测不到 \nmin_line_len = 50 #minimum number of pixels making up a line\nmax_line_gap = 100    # maximum gap in pixels between connectable line segments\nline_img,lines = hough_lines(masked_edges, rho, theta, threshold, min_line_len, max_line_gap)\n")])]),n("div",{staticClass:"warning custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("TODO")]),n("p",[t._v("绘图描述")])]),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("阅读材料")]),n("ol",[n("li",[n("a",{attrs:{href:"https://www.cnblogs.com/cheermyang/p/5348820.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("霍夫变换--直线检测--扫描软件如何检测纸张边缘")])]),n("li",[n("a",{attrs:{href:"https://alyssaq.github.io/2014/understanding-hough-transform/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Understanding Hough Transform With Python")])])])]),n("h2",{attrs:{id:"_5-边缘检测之canny"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-边缘检测之canny","aria-hidden":"true"}},[t._v("#")]),t._v(" 5. 边缘检测之Canny")]),n("p",[t._v("https://blog.csdn.net/wishchin/article/details/50969322")]),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("阅读材料")]),n("ol",[n("li",[n("a",{attrs:{href:"https://www.cnblogs.com/techyan1990/p/7291771.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("边缘检测之Canny")])])])]),n("hr"),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("扩展阅读")]),n("ol",[n("li",[n("a",{attrs:{href:"https://selfdrivingcars.mit.edu/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MIT 无人车课程")])]),n("li",[n("a",{attrs:{href:"https://baike.baidu.com/item/Apex/10532507?fr=aladdin",target:"_blank",rel:"noopener noreferrer"}},[t._v("apex过弯中心点")])]),n("li",[n("a",{attrs:{href:"https://cn.udacity.com/course/introduction-to-computer-vision--ud810",target:"_blank",rel:"noopener noreferrer"}},[t._v("计算机视觉概论")])])])])])}],e=a(0),o=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},n,!1,null,null,null);s.default=o.exports}}]);