(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{242:function(t,s,a){t.exports=a.p+"assets/img/15357271098603.dcbcb799.jpg"},243:function(t,s,a){t.exports=a.p+"assets/img/15357271219478.78d6f16b.jpg"},244:function(t,s,a){t.exports=a.p+"assets/img/15357251540270.76e8bcae.jpg"},245:function(t,s,a){t.exports=a.p+"assets/img/15355583087528.1a02c0a8.jpg"},246:function(t,s,a){t.exports=a.p+"assets/img/15355581795274.f32166ad.jpg"},247:function(t,s,a){t.exports=a.p+"assets/img/15355576874614.7715cdb9.jpg"},248:function(t,s,a){t.exports=a.p+"assets/img/15355550839755.317b2757.jpg"},249:function(t,s,a){t.exports=a.p+"assets/img/15355511279809.4c8c83c8.jpg"},250:function(t,s,a){t.exports=a.p+"assets/img/15355505422080.0811110d.jpg"},251:function(t,s,a){t.exports=a.p+"assets/img/15355485662931.d9842045.jpg"},352:function(t,s,a){"use strict";a.r(s);var n=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"梯度和色彩空间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#梯度和色彩空间","aria-hidden":"true"}},[t._v("#")]),t._v(" 梯度和色彩空间")]),n("h2",{attrs:{id:"梯度阈值"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#梯度阈值","aria-hidden":"true"}},[t._v("#")]),t._v(" 梯度阈值")]),n("h2",{attrs:{id:"sobel-operator"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sobel-operator","aria-hidden":"true"}},[t._v("#")]),t._v(" Sobel Operator")]),n("p",[t._v("gradient = \\sum(region * S_x)gradient=∑(region∗S x)")]),n("ol",[n("li",[t._v("选取kernel大小为3 的sobel算子，对图片在x，y方向分别求导数")]),n("li",[t._v("对于kernel大小范围的区域，如果在x方向上有像素变化，则sobel_x求得的结果不为0，如果没变化，则求得的矩阵全部元素相加为0")])]),n("p",[n("img",{attrs:{src:a(251),alt:""}})]),n("p",[t._v("求x方向的梯度可以加强近垂直线，求y方向梯度可以增强近水平线")]),n("blockquote",[n("p",[t._v("Use cv2.COLOR_RGB2GRAY if you've read in an image using mpimg.imread(). Use cv2.COLOR_BGR2GRAY if you've read in an image using cv2.imread().")])]),n("h2",{attrs:{id:"magnitude-of-the-gradient"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#magnitude-of-the-gradient","aria-hidden":"true"}},[t._v("#")]),t._v(" Magnitude of the Gradient")]),n("p",[n("img",{attrs:{src:a(250),alt:""}})]),n("ol",[n("li",[n("code",[t._v("x")]),t._v(" 方向上的梯度")]),n("li",[n("code",[t._v("y")]),t._v(" 方向上梯度")]),n("li",[n("code",[t._v("x")]),t._v("·,"),n("code",[t._v("y")]),t._v("两个方向上的梯度")])]),n("blockquote",[n("p",[t._v("It's important to note here that the kernel size should be an odd number. Since we are searching for the gradient around a given pixel, we want to have an equal number of pixels in each direction of the region from this central pixel, leading to an odd-numbered filter size - a filter of size three has the central pixel with one additional pixel in each direction, while a filter of size five has an additional two pixels outward from the central pixel in each direction.")])]),n("p",[n("img",{attrs:{src:a(249),alt:""}})]),n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" numpy "),n("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" np\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" cv2\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" matplotlib"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pyplot "),n("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" plt\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" matplotlib"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image "),n("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" mpimg\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pickle\n\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Read in an image and grayscale it")]),t._v("\nimage "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" mpimg"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imread"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'signs_vehicles_xygrad.png'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Define a function that applies Sobel x or y, ")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# then takes an absolute value and applies a threshold.")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Note: calling your function with orient='x', thresh_min=5, thresh_max=100")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# should produce output like the example image shown above this quiz.")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("abs_sobel_thresh")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sobel_kernel"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("3")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("orient"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v("'x'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thresh_min"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thresh_max"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("255")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    \n    "),n("span",{attrs:{class:"token comment"}},[t._v("# Apply the following steps to img")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 1) Convert to grayscale")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 2) Take the derivative in x or y given orient = 'x' or 'y'")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 3) Take the absolute value of the derivative or gradient")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 4) Scale to 8-bit (0 - 255) then convert to type = np.uint8")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 5) Create a mask of 1's where the scaled gradient magnitude ")]),t._v("\n            "),n("span",{attrs:{class:"token comment"}},[t._v("# is > thresh_min and < thresh_max")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 6) Return this mask as your binary_output image")]),t._v("\n    gray "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cvtColor"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COLOR_RGB2GRAY"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),n("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" o "),n("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" orient"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" o "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'x'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            sobelx "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Sobel"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gray"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CV_64F"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            abs_sobelx "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("absolute"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sobelx"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            scaled_sobel "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uint8"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("255")]),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("abs_sobelx"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token builtin"}},[t._v("max")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("abs_sobelx"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" o "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'y'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            sobely "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Sobel"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gray"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CV_64F"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            abs_sobely "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("absolute"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sobely"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            scaled_sobel "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uint8"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("255")]),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("abs_sobely"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token builtin"}},[t._v("max")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("abs_sobely"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("else")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),n("span",{attrs:{class:"token keyword"}},[t._v("pass")]),t._v("\n        \n    "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" orient "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),n("span",{attrs:{class:"token string"}},[t._v("'xy'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        abs_sobel_xy "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("abs_sobelx"),n("span",{attrs:{class:"token operator"}},[t._v("**")]),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("abs_sobely"),n("span",{attrs:{class:"token operator"}},[t._v("**")]),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token operator"}},[t._v("**")]),n("span",{attrs:{class:"token number"}},[t._v("0.5")]),t._v("\n        scaled_sobel "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uint8"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("255")]),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("abs_sobel_xy"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token builtin"}},[t._v("max")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("abs_sobel_xy"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),n("span",{attrs:{class:"token comment"}},[t._v("#print(scaled_sobel)")]),t._v("\n    sxbinary "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zeros_like"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scaled_sobel"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    sxbinary"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scaled_sobel "),n("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" thresh_min"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scaled_sobel "),n("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" thresh_max"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n    binary_output "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("copy"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sxbinary"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# Remove this line")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" binary_output\n    \n"),n("span",{attrs:{class:"token comment"}},[t._v("# Run the function")]),t._v("\ngrad_binary_x "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" abs_sobel_thresh"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" orient"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v("'x'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thresh_min"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("30")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thresh_max"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("100")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ngrad_binary_y "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" abs_sobel_thresh"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" orient"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v("'y'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thresh_min"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("30")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thresh_max"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("100")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ngrad_binary_xy "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" abs_sobel_thresh"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" orient"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v("'xy'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thresh_min"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("30")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thresh_max"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("100")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Plot the result")]),t._v("\nf"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ax1"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ax2"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ax3"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ax4"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplots"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" figsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("24")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("9")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nf"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tight_layout"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_title"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'Original Image'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("50")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grad_binary_xy"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cmap"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v("'gray'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_title"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'Thresholded Gradient'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("50")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nplt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplots_adjust"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" right"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" top"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("1.5")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bottom"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax3"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grad_binary_x"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cmap"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v("'gray'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax3"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_title"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'Thresholded Gradient'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("50")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nplt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplots_adjust"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" right"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" top"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("1.5")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bottom"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax4"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grad_binary_y"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cmap"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v("'gray'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax4"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_title"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'Thresholded Gradient'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("50")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nplt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplots_adjust"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" right"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" top"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("1.5")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bottom"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),n("h2",{attrs:{id:"direction-of-the-gradient"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#direction-of-the-gradient","aria-hidden":"true"}},[t._v("#")]),t._v(" Direction of the Gradient")]),n("p",[t._v("梯度的方向：actan(sobely/sobelx)")]),n("p",[n("a",{attrs:{href:"https://zh.wikipedia.org/wiki/Atan2",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://zh.wikipedia.org/wiki/Atan2")])]),n("p",[n("img",{attrs:{src:a(248),alt:""}})]),n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" numpy "),n("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" np\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" cv2\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" matplotlib"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pyplot "),n("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" plt\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" matplotlib"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("image "),n("span",{attrs:{class:"token keyword"}},[t._v("as")]),t._v(" mpimg\n"),n("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pickle\n\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Read in an image")]),t._v("\nimage "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" mpimg"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imread"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'signs_vehicles_xygrad.png'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Define a function that applies Sobel x and y, ")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# then computes the direction of the gradient")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# and applies a threshold.")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("dir_threshold")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sobel_kernel"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("3")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thresh"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pi"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    \n    "),n("span",{attrs:{class:"token comment"}},[t._v("# Apply the following steps to img")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 1) Convert to grayscale")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 2) Take the gradient in x and y separately")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 3) Take the absolute value of the x and y gradients")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 4) Use np.arctan2(abs_sobely, abs_sobelx) to calculate the direction of the gradient ")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 5) Create a binary mask where direction thresholds are met")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 6) Return this mask as your binary_output image")]),t._v("\n    gray "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cvtColor"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COLOR_RGB2GRAY"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    sobelx "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Sobel"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gray"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CV_64F"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ksize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("sobel_kernel"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    sobely "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Sobel"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gray"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CV_64F"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ksize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("sobel_kernel"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    abs_sobelx "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("absolute"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sobelx"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    abs_sobely "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("absolute"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sobely"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    direction "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("arctan2"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("abs_sobely"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("abs_sobelx"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    mask "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zeros_like"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("direction"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    mask"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("direction "),n("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" thresh"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("direction "),n("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" thresh"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\n    \n    binary_output "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("copy"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mask"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# Remove this line")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" binary_output\n    \n"),n("span",{attrs:{class:"token comment"}},[t._v("# Run the function")]),t._v("\ndir_binary "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" dir_threshold"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sobel_kernel"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("15")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thresh"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("0.7")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1.3")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# Plot the result")]),t._v("\nf"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ax1"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ax2"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplots"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" figsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("24")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("9")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nf"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tight_layout"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_title"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'Original Image'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("50")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir_binary"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cmap"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v("'gray'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_title"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'Thresholded Grad. Dir.'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("50")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nplt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplots_adjust"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" right"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" top"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("0.9")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bottom"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),n("h2",{attrs:{id:"combining-thresholds"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#combining-thresholds","aria-hidden":"true"}},[t._v("#")]),t._v(" Combining Thresholds")]),n("p",[n("img",{attrs:{src:a(247),alt:""}})]),n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[t._v("\ncombined1 "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zeros_like"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir_binary"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ncombined2 "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zeros_like"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir_binary"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ncombined3 "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zeros_like"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir_binary"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ncombined4 "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zeros_like"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir_binary"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ncombined1"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gradx "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grady "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mag_binary "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir_binary "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\ncombined2"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gradx "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grady "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mag_binary "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir_binary "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\ncombined3"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gradx "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grady "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mag_binary "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir_binary "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\ncombined4"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gradx "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grady "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mag_binary "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dir_binary "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n\nf"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ax1"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ax2"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ax3"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ax4"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplots"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" figsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("24")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("9")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nf"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tight_layout"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("combined1"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cmap"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v('"gray"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_title"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'1'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("fontsize"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("combined2"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cmap"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v("'gray'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_title"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'2'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("fontsize"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax3"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("combined3"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cmap"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v("'gray'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax3"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_title"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'3'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("fontsize"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax4"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("combined4"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cmap"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v("'gray'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax4"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_title"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'4'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("fontsize"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nplt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplots_adjust"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" right"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("0.7")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" top"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bottom"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])]),n("p",[n("img",{attrs:{src:a(246),alt:""}})]),n("h3",{attrs:{id:"小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结","aria-hidden":"true"}},[t._v("#")]),t._v(" 小结")]),n("p",[t._v("sobel 算子时canny算法的核心，我们对图像在x或y方向求导，如果图像发生了变化，我们就能在对应的方向上捕获它，最终就形成了线条。对图像应用sobel x有助于检测到垂直的线条，sobel y有助于检测到水平的线条，但是一般我们是取其绝对值。因此当我们求两个方向上的绝对值时，就得到了Magnitude of the Gradient，这样就能检测到所有的边缘，这就是canny算法能够发现全部边缘的原因。然而对于车道线的检测来讲，我们希望得到的是接近垂直的边缘，因此我们要计算梯度的方向，也就是Direction of the Gradient。计算这个值我们需要用到atan2(y, x) 也就是 atan(y/x)。")]),n("h2",{attrs:{id:"彩色空间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#彩色空间","aria-hidden":"true"}},[t._v("#")]),t._v(" 彩色空间")]),n("h3",{attrs:{id:"hsv-and-hsl"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hsv-and-hsl","aria-hidden":"true"}},[t._v("#")]),t._v(" HSV and HSL")]),n("p",[t._v("Hue：\nLightness ：\nValue ：\nSaturation：")]),n("p",[n("img",{attrs:{src:a(245),alt:""}})]),n("h3",{attrs:{id:"hls-and-color-thresholds"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hls-and-color-thresholds","aria-hidden":"true"}},[t._v("#")]),t._v(" HLS and Color Thresholds")]),n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("hls_select")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" thresh"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("255")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 1) Convert to HLS color space")]),t._v("\n    hls "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cvtColor"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COLOR_BGR2HLS"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    H "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" hls"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    L "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" hls"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    S "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" hls"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    f"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ax1"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ax2 "),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ax3"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" plt"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplots"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("3")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" figsize"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("24")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("9")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    f"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tight_layout"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    ax1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("H"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cmap"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v('"gray"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    ax2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("L"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cmap"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v('"gray"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    ax3"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("S"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cmap"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token string"}},[t._v('"gray"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    binary_output "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zeros_like"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("S"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    binary_output"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("S"),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("thresh"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token operator"}},[t._v("&")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("S"),n("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v("thresh"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 2) Apply a threshold to the S channel")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# 3) Return a binary image of threshold result")]),t._v("\n    binary_output "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("copy"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("binary_output"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# placeholder line")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" binary_output\n")])]),n("p",[n("img",{attrs:{src:a(244),alt:""}})]),n("h3",{attrs:{id:"combine-color-and-gradient"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#combine-color-and-gradient","aria-hidden":"true"}},[t._v("#")]),t._v(" Combine Color and Gradient")]),n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("pipeline")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" s_thresh"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("170")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("255")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sx_thresh"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("20")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("100")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    img "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("copy"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# Convert to HLS color space and separate the V channel")]),t._v("\n    hls "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cvtColor"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COLOR_RGB2HLS"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    l_channel "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" hls"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    s_channel "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" hls"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# Sobel x")]),t._v("\n    sobelx "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Sobel"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("l_channel"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cv2"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CV_64F"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# Take the derivative in x")]),t._v("\n    abs_sobelx "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("absolute"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sobelx"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("# Absolute x derivative to accentuate lines away from horizontal")]),t._v("\n    scaled_sobel "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uint8"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token number"}},[t._v("255")]),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("abs_sobelx"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token builtin"}},[t._v("max")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("abs_sobelx"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),n("span",{attrs:{class:"token comment"}},[t._v("# Threshold x gradient")]),t._v("\n    sxbinary "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zeros_like"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scaled_sobel"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    sxbinary"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scaled_sobel "),n("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" sx_thresh"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("scaled_sobel "),n("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" sx_thresh"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\n    \n    "),n("span",{attrs:{class:"token comment"}},[t._v("# Threshold color channel")]),t._v("\n    s_binary "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zeros_like"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s_channel"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    s_binary"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s_channel "),n("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" s_thresh"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s_channel "),n("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" s_thresh"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("# Stack each channel")]),t._v("\n    color_binary "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dstack"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" np"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zeros_like"),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sxbinary"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sxbinary"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" s_binary"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("255")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" color_binary"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sxbinary"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" s_binary\n")])]),n("p",[n("img",{attrs:{src:a(243),alt:""}})]),n("p",[n("img",{attrs:{src:a(242),alt:""}})])])}],o=a(0),e=Object(o.a)({},function(){this.$createElement;this._self._c;return this._m(0)},n,!1,null,null,null);s.default=e.exports}}]);