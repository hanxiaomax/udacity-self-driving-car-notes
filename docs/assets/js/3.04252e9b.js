(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{353:function(t,s,n){"use strict";n.r(s);var a=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h2",{attrs:{id:"视角变换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视角变换","aria-hidden":"true"}},[t._v("#")]),t._v(" 视角变换")]),a("p",[a("img",{attrs:{src:n(82),alt:""}})]),a("p",[a("img",{attrs:{src:n(81),alt:""}})]),a("p",[t._v("变换的方法和正畸算法类似，但是正畸算法是将标准对象点变换到图像上，而透视变换是将一种视角的图像上的兴趣点，变换到目标视角图像上。通过这种变换我们可以更好的从图片中获取我们关注的信息。")]),a("p",[a("img",{attrs:{src:n(80),alt:""}})]),a("p",[t._v("进行线性变换，我们只需要在两张图片中各选取四个点，分别构建一个平面，然后计算变换矩阵，进行变换。")]),a("p",[t._v("注意：有很多自动选点算法，比如利用边缘和端点等")]),a("ol",[a("li",[t._v("基于源和目的图像的四个点，计算变换矩阵M")])]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("M = cv2.getPerspectiveTransform(src, dst)\n")])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("计算逆矩阵(用于恢复)")])]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Minv = cv2.getPerspectiveTransform(dst, src)\n")])]),a("ol",[a("li",[t._v("变换视角")])]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("warped = cv2.warpPerspective(img, M, img_size, flags=cv2.INTER_LINEAR)\n")])]),a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("_img "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imread"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"./calibration_wide/dst.jpg"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nnx "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("8")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("# the number of inside corners in x")]),t._v("\nny "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("6")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("# the number of inside corners in y")]),t._v("\n\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("draw_poly")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("points"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("p_color"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("l_color"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("text_color"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ax"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token boolean"}},[t._v("None")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("fontsize"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("30")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    xx "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    yy "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" index"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("v "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{attrs:{class:"token builtin"}},[t._v("enumerate")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("points"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" x"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("y "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" v"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" ax"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                ax"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotate"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"  p{0}({1},{2})"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("format")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token builtin"}},[t._v("int")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token builtin"}},[t._v("int")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("y"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("y"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("fontsize"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("fontsize"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("color"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("text_color"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                ax"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("y"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("p_color"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("markersize"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"30"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                plt"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotate"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"  p{0}({1},{2})"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token builtin"}},[t._v("format")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token builtin"}},[t._v("int")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token builtin"}},[t._v("int")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("y"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("y"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("fontsize"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("fontsize"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("color"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("text_color"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                plt"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("y"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("p_color"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("markersize"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"30"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            xx"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            yy"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("y"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    xx"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xx"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    yy"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("yy"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" ax"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        ax"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xx"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("yy"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("l_color"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("lw"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("5")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        plt"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plot"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xx"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("yy"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("l_color"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("lw"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("5")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n    \n    \n    \n    \n"),a("span",{attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("corners_unwarp")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nx"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ny"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("# Pass in your image into this function")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("# Write code to do the following steps")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("# 1) Undistort using mtx and dist")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("# 2) Convert to grayscale")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("# 3) Find the chessboard corners")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("# 4) If corners found: ")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("# a) draw corners")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("# b) define 4 source points src = np.float32([[,],[,],[,],[,]])")]),t._v("\n                 "),a("span",{attrs:{class:"token comment"}},[t._v("#Note: you could pick any four of the detected corners ")]),t._v("\n                 "),a("span",{attrs:{class:"token comment"}},[t._v("# as long as those four corners define a rectangle")]),t._v("\n                 "),a("span",{attrs:{class:"token comment"}},[t._v("#One especially smart way to do this would be to use four well-chosen")]),t._v("\n                 "),a("span",{attrs:{class:"token comment"}},[t._v("# corners that were automatically detected during the undistortion steps")]),t._v("\n                 "),a("span",{attrs:{class:"token comment"}},[t._v("#We recommend using the automatic detection of corners in your code")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("# c) define 4 destination points dst = np.float32([[,],[,],[,],[,]])")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("# d) use cv2.getPerspectiveTransform() to get M, the transform matrix")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("# e) use cv2.warpPerspective() to warp your image to a top-down view")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#delete the next two lines")]),t._v("\n    _gray "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cvtColor"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_img"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cv2"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COLOR_BGR2GRAY"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    ret"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" corners "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("findChessboardCorners"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_gray"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("COL"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ROW"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("None")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#print(corners)")]),t._v("\n    dst_with_corner "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("drawChessboardCorners"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_gray"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("COL"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ROW"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("corners"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ret"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    src_point "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("float32"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("corners"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("corners"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("corners"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("10")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("corners"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("8")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    plt"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("figure"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("figsize"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("20")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token number"}},[t._v("20")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    plt"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dst_with_corner"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cmap"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"gray"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    draw_poly"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("src_point"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token string"}},[t._v('".g"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token string"}},[t._v('"-b"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token string"}},[t._v('"yellow"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#print(src_point)")]),t._v("\n    \n    "),a("span",{attrs:{class:"token comment"}},[t._v("#offset = 100")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#dst = np.float32([[offset, offset], [img_size[0]-offset, offset], [img_size[0]-offset, img_size[1]-offset], [offset, img_size[1]-offset]])")]),t._v("\n    dst_point "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" np"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("float32"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("94")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token number"}},[t._v("214")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("370")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token number"}},[t._v("214")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("370")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token number"}},[t._v("365")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("94")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token number"}},[t._v("365")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#dst_point = np.float32([[corners[0][0]],[[corners[0][1][0],214]],[[370,365]],[[94,365]]])")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#print(corners[0])")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#print(dst_point)")]),t._v("\n    draw_poly"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dst_point"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token string"}},[t._v('".r"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token string"}},[t._v('"--y"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token string"}},[t._v('"red"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    M "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getPerspectiveTransform"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("src_point"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dst_point"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    warped "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" cv2"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("warpPerspective"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_gray"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" M"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _gray"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shape"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" flags"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("cv2"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("INTER_LINEAR"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n \n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" warped"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" M"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("src_point"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("dst_point\n\ntop_down"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" perspective_M"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("src_point"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("dst_point"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" corners_unwarp"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_img"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nx"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ny"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nf"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ax1"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ax2"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" plt"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplots"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" figsize"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("24")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("9")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nf"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tight_layout"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndraw_poly"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("src_point"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token string"}},[t._v('".g"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token string"}},[t._v('"-b"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token string"}},[t._v('"yellow"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ax1"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("fontsize"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("20")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax1"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_img"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cmap"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"gray"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax1"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_title"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'Original Image'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontsize"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("50")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndraw_poly"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dst_point"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token string"}},[t._v('".r"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token string"}},[t._v('"--y"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{attrs:{class:"token string"}},[t._v('"red"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ax2"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("fontsize"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("20")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax2"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imshow"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("top_down"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("cmap"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"gray"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nax2"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("set_title"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'Undistorted and Warped Image'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fontsize"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("50")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nplt"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subplots_adjust"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" right"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" top"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("0.9")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bottom"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])]),a("p",[a("img",{attrs:{src:n(79),alt:""}})]),a("p",[a("img",{attrs:{src:n(78),alt:""}})]),a("p",[t._v("如果比例相差太大，会产生缩放的效果\n"),a("img",{attrs:{src:n(77),alt:""}})])])}],o=n(0),p=Object(o.a)({},function(){this.$createElement;this._self._c;return this._m(0)},a,!1,null,null,null);s.default=p.exports},77:function(t,s,n){t.exports=n.p+"assets/img/15357675510199.08275d19.jpg"},78:function(t,s,n){t.exports=n.p+"assets/img/15357674415153.a8684064.jpg"},79:function(t,s,n){t.exports=n.p+"assets/img/15354665136102.a7f49aa0.jpg"},80:function(t,s,n){t.exports=n.p+"assets/img/15352501469628.277cb7ab.jpg"},81:function(t,s,n){t.exports=n.p+"assets/img/15352499212136.ed843223.jpg"},82:function(t,s,n){t.exports=n.p+"assets/img/15352497500983.756145c6.jpg"}}]);